---
title: Urban Heat Wave
subtitle: A cross-disciplinary, place-based Earth Data Science activity 
description: In this hands-on Earth Data Science activity, we'll look at temperature data from two locations in the Chicago area and compare them. 
author:
  - Nate Quarderer
  - Elsa Culler
keywords:
  - "Open Science"
  - "Urban Heat Island"
  - "Place-based Learning"
date: last-modified
image: /img/earth-analytics/urban-heat-island/uhi-icon.png
learning-goals:
  - Access open weather and climate data from NOAA
  - Answer a cuturally relevant question using EDS
  - Adapt curriculum to different disciplines and cultural contexts
  - Analyze temperature data over time
  - Parse date information so that it is represented as a datetime type
  - Use operators to convert to different units
  - Compare temperature in different locations
jupyter: python3
format:
  html: default
---

## We're all feeling the heat!

![Source: Chicago Sun Times; Children and adults cool down at the Crown Fountain in the Loop on Monday June 17, 2024](https://cst.brightspotcdn.com/dims4/default/ec8ca7b/2147483647/strip/false/crop/3000x2000+0+0/resize/1486x991!/quality/90/?url=https%3A%2F%2Fchorus-production-cst-web.s3.us-east-1.amazonaws.com%2Fbrightspot%2F3c%2F72%2F37c4c5124af88bb45a3f591cea94%2Fweather-061824-15.jpg)

[The summer of 2024 was the hottest yet](https://www.nasa.gov/earth/nasa-finds-summer-2024-hottest-to-date/), [@younger_nasa_2024] and every indication is that the heat is only going to get more intense. Communities need to protect their vulnerable members by adapting to the changing climate with solutions informed by their cultural, geographic, and political context.

### Place-based, culturally-relevant curriculum is essential to engaging diverse groups of students

Because this is a **place-based** learning exercise, it can be adapted to different cultural contexts. This is a key element we hear about when asking communities how to teach Earth Data Science in a culturally responsive way.

![Source: https://successfulacademics.com/BlackChildSEL/CRT.html](https://successfulacademics.com/IMAGES/Our-Org-Culturally-Responsive-Teaching_Title.png)

::: {.callout-discuss}
Heat affects different communities in different ways. Here are some questions to help spark a conversation with classmates or with members of your community:

  * What effects has **heat** had on your **community**?
  * What **changes** have you observed to the climate over your lifetime? Can you talk to an elder and find out what changes they have observed? 
  * How have **policies** like redlining influenced **community vulnerability** to heat waves?
  * Are there **traditional building methods or ecological practices** in your culture that help to mitigate the effects of heat waves?
:::

We know it can be tough to talk about climate change -- be easy on yourselves! One way to help have a positive conversation about climate change is to talk about solutions. After all, when it comes to a life-or-death issue like heat waves, we can't let the conversation end with observing the situation. 

::: {.callout-discuss}
What are some short- and long-term strategies for **mitigating** the effects of heat on your community? If you were implementing mitigation strategies, **who would you reach out to first**? Below are some examples of some types of strategies you could discuss:

  * **Reaching out to vulnerable community members** through cultural and religious institutions to provide aid such as transportation to an air conditioned space, ensure water supply, and cool down buildings with strategies like fans and radiation-blocking window films.
  * Culturally and climatically appropriate **changes to the built environment** to reduce heat absorption and storage during heat waves.
  * Culturally and climatically appropriate changes and/or **expansion of green space** to reduce heat absorption and storage
  * **Cultural events** to help your community adapt
:::

Making cultural connections is important for achieving learning goals and engaging diverse groups of students.

### Meet your classroom learning goals with Earth Data Science

We have also developed this activity so that it can be adapted to many different academic disciplines, and we encourage you to do so in your classes! For example:

| Discipline | Learning Goals |
| ------- | ------------------------------------------------ |
| Physics | Explain how aspects of heat transfer such as**albedo**, **thermal mass**, and **latent heat** relate to the Urban Heat Island effect|
| Biology | Biological concepts that cause the Urban Heat Island effect such as **transpiration**, **photosynthesis**, and **homeostasis** |
| Statistics | Probability distributions for average and extreme temperatures, stationarity, and hypothesis testing to determine differences among sites |
| Calculus | Processes governing heat transfer |

:::{.callout-read .column-margin title="Air Temperature vs. Surface Temperature"}
We'll be looking at air temperature in this analysis rather than surface temperature. Some of you may have clocked that the surface temperature is more related to the Urban Heat Island mechanism! However, the two are closely related, so we think we can still examing Urban Heat Island effects using air temperature. Check out this resource from the EPA [@us_epa_learn_2014] on the relationship between air temperature and surface temperature and the Urban Heat Island effect:

[![](https://www.epa.gov/sites/default/files/2020-07/heat_island_effect_diagram.jpg)](https://www.epa.gov/heatislands/learn-about-heat-islands)
:::

## **Case Study:** Chicago summer 2024 heat wave

![Source: Illinois State Climatologist; Daily June average temperatures and departures from normal in Chicago](https://stateclimatologist.web.illinois.edu/wp-content/uploads/2024/07/Chicago_temps-768x338.png)

According to the [Illinois state climatology office](https://stateclimatologist.web.illinois.edu/2024/07/) [@illinois_state_water_survey_warm_2024], daily average temperatures between June 13 and June 25 were 5 to 15 degrees above normal in Chicago and statewide. Overnight temperatures in Chicago were forecast to [stay into the 70's](https://chicago.suntimes.com/weather/2024/06/17/chicago-weather-heat-dome-wave-hot-temperatures-what-you-should-know) with record breaking temperatures being attributed to [climate change](https://www.cbsnews.com/chicago/news/chicago-heat-wave-how-to-stay-cool-safe/).

![Source: NOAA, Magenta indicates the highest risk of extreme heat on Monday June 17, 2024](https://ewscripps.brightspotcdn.com/dims4/default/88c8feb/2147483647/strip/true/crop/2016x1104+0+0/resize/1280x701!/quality/90/?url=http%3A%2F%2Fewscripps-brightspot.s3.amazonaws.com%2F3d%2F40%2Fe299467c47ac8176e326d4159ba2%2Fscreen-shot-2024-06-13-at-9-10-43-am.png)

If you teach in or near Chicago, your students probably have some feelings about how hot it was! The Chicago area is known for its at times extreme weather, but cities get hit particularly hard by heat waves due to the urban heat island effect. [This article from WGN](https://wgntv.com/weather/weather-blog/chicago-is-an-urban-heat-island-so-what-does-that-mean/) [@alix_martichoux_urban_2024] explains what this means for cities like Chicago.

### Heat kills

Climate change is intensifying summer heat in Chicago, particularly in heat island areas, which disproportionately affects marginalized communities. These neighborhoods, often with less green space and more heat-trapping infrastructure, face higher temperatures and greater health risks [@us_epa_heat_2019]. 

::: {.callout-read .column-margin title="What is a Heat Island?"}
Read more about the Urban Heat Island effect at the [EPA](https://www.epa.gov/heatislands).
:::

Chicago O'Hare International Airport is a known heat island often reporting temperatures 5-10 degrees warmer than surrounding communities [@nbc_chicago_what_2022].

### Is it cooler by the lake?

Many Chicagoans know that one of the best ways to beat the heat is to head to the lake. In this we'll try to answer whether it's *really* [**cooler by the Lake**](), and what Chicago could do to cool down the rest of the City.

![WGN Temperature Forecast -- it's cooler by the lake!](https://wgntv.com/wp-content/uploads/sites/5/2023/04/NLanimation10and11.gif)

We will select two climate stations located within the greater Chicago area: O'Hare International Airport (Station ID: USW00094846), and Northerly Island (Station ID: USC00111550) to explore trends in maximum daily temperatures.

::: {layout-ncol=2}

![[Photo of O'Hare Airport by Miguel Angel Sanz - Unsplash.](https://fly-ord.com/airlines)](https://fly-ord.com/sites/default/files/inline-images/chicago-ord-miguel-angel-sanz-unsplash.jpg)

![[Aerial view of Northerly Island. Photo by Tom Harris.](https://www.architecture.org/online-resources/buildings-of-chicago/northerly-island)](https://ik.imagekit.io/ChicagoArchitecture/image/assets%2F49af4dfb0fbc43d58bf8ce407e839d74%2Fc5ead4a81e4e41a28d6cee59bc4c1761?tr=q-50,fm-webp)

:::

## Get started with open, reproducible science in the cloud

We will be using [Python]() and [GitHub codespaces](), two popular open-source data science tools, to do the coding for this workshop, along with [GitHub classroom]() to distribute the activity. You will not need to download or install anything on your computer - everything we'll do can be done in the cloud! You and your students will need a free GitHub account in order to accept the assignment from GitHub classroom and complete the activity.

::: {.callout-tip .column-margin}
For those interested, we have created a working Python environment that we host on [Docker Hub](https://hub.docker.com/r/earthlab/earth-analytics-python-env). Feel free to share this with your students or research group.
:::

We're excited to get started doing some EDS with you!

## STEP 1: Import libraries

### Python **packages** let you use code written by experts around the world

Because Python is open source, lots of different people and organizations can contribute (including you!). Many contributions are in the form of **packages** which do not come with a standard Python download.

::: {.callout-read title="Packages need to be installed and imported."}
Learn more about using Python packages. How do you find and use packages? What is the difference between installing and importing packages? When do you need to do each one? [This article on Python packages](https://www.earthdatascience.org/courses/intro-to-earth-data-science/python-code-fundamentals/use-python-packages/) will walk you through the basics.
:::

In the cell below, someone was trying to import the **pandas package**, which helps us to work with [**tabular data** such as comma-separated value or csv files](https://www.earthdatascience.org/courses/intro-to-earth-data-science/file-formats/use-text-files/).

::: {.callout-task title="Import a package"}

  1. Correct the typo below to properly import the pandas package under its **alias** pd.
  2. Run the cell to import pandas

:::

::: {.content-visible when-format="ipynb"}
:::: {.callout-warning}
Make sure to run your code in the right **environment** to avoid import errors!

We've created a coding **environment** for you to use that already has all the software and packages you will need! When you try to run some code, you may be prompted to select a **kernel**. The **kernel** refers to the version of Python you are using. You should use the **base** kernel, which should be the default option for you.
::::
:::

```{python}
# Use tabular data
import pandas as pd

import matplotlib.pyplot as plt
import numpy as np
```

## STEP 2: Download Data

### Global Historical Climatology Network

One way scientists know that the climate is changing is by looking at records from temperature sensors around the globe. Some of these sensors have been recording data for over a century! For this activity, we'll get daily maximum temperature measurements from the [Global Historical Climate Network daily](https://www.ncei.noaa.gov/products/land-based-station/global-historical-climatology-network-daily) [@menne_overview_2012], an openly available and extensively validated global network of temperature sensors.

![The Global Historical Climatology Network Source: CC BY-SA 3.0, https://commons.wikimedia.org/w/index.php?curid=2084097](https://upload.wikimedia.org/wikipedia/commons/a/ab/GHCN_Temperature_Stations.png)

The GHCNd data are available through by the National Oceanic and Atmospheric Administration's (NOAA) National Centers for Environmental Information (NCEI) Climate Data Online [search tool](https://www.ncdc.noaa.gov/cdo-web/search). We can get also get these data using code by contacting NCEI's API.

::: {.callout-tip .column-margin title="What's an API?"}
An API, or Application Programming Interface, is how computers talk to each other.
:::

::: {.callout-read}
Read more about [NCEI's API](https://www.ncei.noaa.gov/support/access-data-service-api-user-documentation) and the [Climate Data Online](https://www.ncei.noaa.gov/cdo-web/) database.
:::

For this activity we have created URLs that contacts the NCEI API  for two climate stations in the greater Chicago area. We will walk through each line of the url to explain what it is doing.

### O'Hare International Airport
Chicago O'Hare International Airport (ORD) is one of the busiest airports in the world, serving as a major hub for both domestic and international flights. Located about 14 miles northwest of downtown Chicago, it offers flights to more than 200 destinations and handles over 83 million passengers annually. It is home to Chicago's official meteorological station. It creates an urban heat island due to the amount of concrete and asphalt needed to support the infrastructure.

**Station ID: USW00094846**

```{python}
# Create an API call for the O'Hare climate station
ohare_url = (
    'https://www.ncei.noaa.gov/access/services/data/v1?'
    'dataset=daily-summaries'
    '&dataTypes=TMAX'
    '&stations=USW00094846'
    '&startDate=2024-06-01'
    '&endDate=2024-06-30'
    '&units=standard')

# Path to local data file (Codespaces only)
ohare_path = 'ohare-temps.csv'
ohare_url
```

```{python}
# Open data using pandas
ohare_df = pd.read_csv(
    ohare_url,
    # Comment above and uncomment below if NCEI isn't working
    # ohare_path,
    parse_dates=True,
    index_col='DATE',
    na_values=['NaN'])

# Check the first 5 lines of data
ohare_df.head()
```

```{python}
# Plot the data using pandas
ohare_df.TMAX.plot()
```

### Northerly Island

Northerly Island is a 91-acre man-made peninsula located along the Lake Michigan shoreline in Chicago. Originally part of Daniel Burnham’s 1909 Plan of Chicago, it was transformed into a nature-focused park featuring walking trails, natural habitats, and scenic lakefront views. The site also hosts the Huntington Bank Pavilion, a popular outdoor concert venue.

**Station ID: USC00111550**

```{python}

# Create an API call for the Northerly climate station
northerly_url = ('https://www.ncei.noaa.gov/access/services/data/v1?'
                 'dataset=daily-summaries'
                 '&dataTypes=TMAX'
                 '&stations=USC00111550'
                 '&startDate=2024-06-01'
                 '&endDate=2024-06-30'
                 '&units=standard')
# Path to local data file (Codespaces only)
northerly_path = 'northerly-temps.csv'
northerly_url
```

```{python}
# Open data
northerly_df = pd.read_csv(
    northerly_url,
    # Comment above and uncomment below in the event that NCEI isn't working
    # northerly_path,
    parse_dates=True,
    index_col='DATE',
    na_values=['NaN'])

# Check the first 5 lines of data
northerly_df.head()
```

```{python}
northerly_df.TMAX.plot()
```

## STEP 3: Wrangle Data

### Select only the columns you want

```{python}
ohare_tmax_df = ohare_df[['TMAX']]
ohare_tmax_df.head()
```

```{python}
northerly_tmax_df = northerly_df[['TMAX']]
northerly_tmax_df.head()
```

### Join data

```{python}
# Concatenate the data
tmax_df = (
    ohare_tmax_df
    .join(
        northerly_tmax_df, 
        lsuffix='_ohare', 
        rsuffix='_northerly')
)
tmax_df.head()
```

## STEP 4: Plot

Let's try plotting the joined `DataFrame`, just like we plotted the data above:

```{python}
tmax_df.plot()
```

Hopefully you can see all the data! However, this plot is missing some key elements, and is lacking in style.

::: {.callout-response}
What do you notice about this plot that you would like to change for a final figure?
:::

### Rename columns for nicer labels

Something you might have noticed about your plot is that the labels in the legend don't look very nice. Most things about hte plot we can change by passing **parameters** to the `.plot()` method (see below). However, the easiest way to change the legend labels in Python, we think, is to rename the columns. Python will automatically use the column names as legend labels just like it did in the first plot.

```{python}
# Rename the columns
tmax_plot_df = tmax_df.rename(columns={
    'TMAX_ohare': "O'Hare Airport", 
    'TMAX_northerly': 'Northerly Island'})
tmax_plot_df.head()
```

### Generate a figure

Now, we're ready to make a quality figure of the data!

```{python}
tmax_plot_df.plot(
    figsize=(8, 5),
    marker='o', linestyle='-',
    xlabel='Date', ylabel='Temperature ($^\circ$F)',
    title='Daily Maximum Temperatures - Chicago, IL - June 2024',
    colormap='Set1'
)
```

::: {.callout-discuss title="What do you notice about the data?"}

Take a few minutes to discuss the patterns and trends you see in the data with your neighbors.
:::

## STEP 5: Analysis

### Is it really cooler by the Lake?
We might be able to make some claims based on the plot above but is there more we can say about the differences in temperature between O'Hare and Northerly Island last June? What other kinds of test might we be able to do on this data to help tell this story in more detail?

### Statistical test text and code goes here...

# **OPTIONAL BONUS activities (if you have time)**
* Use ChatGPT to make a different kind of plot
* Compare two different climate stations
* Add a line that represents the average temperature

```{python}
# From ChatGPT - Can we make a similar plot using bars instead of points/lines?

# Sample data (replace with your actual DataFrame)
# tmax_df should be your DataFrame with 'TMAX_ohare' and 'TMAX_northerly' columns and a DateTime index

# Define the width of the bars
bar_width = 0.4

# Create a numpy array for the indices (x-axis positions)
x = np.arange(len(tmax_df.index))

# Create a figure
plt.figure(figsize=(10, 6))

# Plot O'Hare data as bars
plt.bar(x - bar_width / 2, tmax_df['TMAX_ohare'], width=bar_width, label="O'Hare International Airport", color='red')

# Plot Northerly Island data as bars
plt.bar(x + bar_width / 2, tmax_df['TMAX_northerly'], width=bar_width, label="Northerly Island", color='blue')

# Add title and labels
plt.title('Daily Maximum Temperatures - June 2024')
plt.xlabel('Date')
plt.ylabel('Temperature (°F)')

# Set x-axis ticks to the index (date) and rotate for better readability
plt.xticks(x, tmax_df.index.strftime('%Y-%m-%d'), rotation=45)

# Add grid
plt.grid(True)

# Add legend
plt.legend()

# Adjust layout to prevent clipping
plt.tight_layout()

# Show plot
plt.show()
```

